<div class="wrapper">
    <div id="main_part" (keypress)="handleInput($event)" tabindex="1">
        <div class="left_item">
            <!-- <div class="main_left" style="height: 540px;">
                <div class="holder">
                    <div id="running_order_header">
                        <h3>Orders</h3>
                        <span id="refresh_order" (click)="getAllOrders()"><i class="fas fa-sync-alt"></i></span>
                        <input type="text" (input)="searchOrder()" name=" search_running_orders"
                            id="search_running_orders" autocomplete="off" class="ir_h15_m_w90"
                            placeholder="Order Number">
                    </div>
                    <div class="anyClassTwo order_details " style="position: relative; height: 30px;">
                        <div class="order_details" id="order_details_holder"
                            style="margin-bottom: 0px; margin-right: 0px;max-height: 278px;">
                            <div data-started-cooking="0" data-done-cooking="2" *ngFor="let p of responseOrderReplica"
                                class="txt_14 single_order fix new_order_22" data-selected="unselected" id="order_22">
                                <div class="inside_single_order_container" data-toggle="modal"
                                    data-target="#OrderViewModal" (click)="viewOrder(p)">
                                    <div class="single_order_content_holder_inside fix"><span
                                            id="open_orders_order_status_22" class="ir_display_none">2</span>
                                        <p><span class="running_order_customer_name">Order No: {{p.kotID}}</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <div class="main_middle" style="height: 540px; width: 620px;">
                <div class="main_top fix">
                    <!-- Top Btns -->
                    <div class="button_holder no-need-for-waiter">
                        <button type="button" class="w-100 btn bg-blue-btn" data-toggle="modal"
                            data-target="#OrdersModal" (click)="getAllOrders()">Orders</button>
                        <button type="button" class="w-100 btn bg-blue-btn" data-toggle="modal"
                            data-target="#TablesModal" (click)="showTables()">Tables</button>
                        <button class="selected__btn_c"
                            [ngStyle]="{'background-color': orderTypeValue == 'Dine In' ? '#82C0CF ' : '#64e1ff' }"
                            data-selected="" id="dine_in_button" (click)="orderType(1)">
                            <i class="fal fa-table"></i> Dine In </button>
                        <button class="selected__btn_c"
                            [ngStyle]="{'background-color': orderTypeValue == 'Take Away' ? '#82C0CF ' : '#64e1ff' }"
                            id="take_away_button" (click)="orderType(2)"><i class="fal fa-shopping-bag"></i>
                            Take Away</button>
                        <button class="selected__btn_c"
                            [ngStyle]="{'background-color': orderTypeValue == 'Delivery' ? '#82C0CF ' : '#64e1ff' }"
                            id="delivery_button" data-toggle="modal" data-target="#addDeliveryModal"
                            (click)="orderType(3)"><i class="fal fa-truck"></i>
                            Delivery</button>
                    </div>

                    <div class="waiter_customer">
                        <form [formGroup]="SearchForm">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Select Table</label>
                                        <ng-multiselect-dropdown [placeholder]="'Select Table'" [data]="responseTable"
                                            [(ngModel)]="selectedTables" [settings]="dropdownSettings"
                                            (onSelect)="onTableSelect($event)" (onSelectAll)="onSelectAll($event)"
                                            (onDeSelect)="onItemDeSelect($event)"
                                            (onDeSelectAll)="onItemDeSelectAll($event)"
                                            [ngModelOptions]="{standalone: true}">
                                        </ng-multiselect-dropdown>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Search Customer</label>
                                        <input type="text" (change)="searchCustomer()"
                                            formControlName="searchCustomerByCode" autocomplete="off"
                                            class="form-control" placeholder="Customer Code">
                                        <button style="border-radius: 4px !important; " type="submit"
                                            class="searchButtonTwo" (click)="searchCustomer()"><i
                                                class="fa fa-search"></i></button>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Customer Name</label>
                                        <input type="text" style="margin-left: 18px;" formControlName="CustomerName"
                                            readonly autocomplete="off" class="form-control">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <label class="mt-5"></label>
                                    <button [disabled]="!customerFound" class="tags" gloss="View Customer Detail"
                                        title="View Customer Detail" data-toggle="modal" data-target="#addCustomerModal"
                                        (click)="viewCustomer()"><i class="fa fa-eye"></i></button>
                                    <label class="mt-5"></label>
                                    <button class="tags" style="margin-left: 60px;" gloss="Add Customer"
                                        title="Add Customer" data-toggle="modal" data-target="#addCustomerModal"
                                        (click)="addCustomer()"><i class="fal fa-plus"></i></button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="table-box anyClassFour" #scrollMe [scrollTop]="scrollMe.scrollHeight">
                    <div class="table-responsive">
                        <table id="datatable" class="table table-striped">
                            <thead style="background-color: #ff6060">
                                <tr>
                                    <th></th>
                                    <th>Items</th>
                                    <th style="text-align: right;">Price</th>
                                    <th>Qty</th>
                                    <th title="Discount">Discount</th>
                                    <th style="text-align: right;">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let p of POSNewModelRequest.requestKotDetail">
                                    <td class="ir_w_1 ir_txt_center"><button
                                            class="btn btn-danger color text-white btn-sm m-1" (click)="removeItem(p)"
                                            title="Remove">
                                            <i class="fa fa-trash" aria-hidden="true"></i></button>
                                    </td>
                                    <td class="ir_w_30" *ngIf="!p.variantID && !p.dealID">
                                        {{p.foodItemName}}</td>
                                    <td class="ir_w_30" *ngIf="p.variantID && !p.dealID">
                                        {{p.foodItemName}} ({{p.variantName}})
                                    </td>
                                    <td class="ir_w_30" *ngIf="p.dealID">{{p.dealName}}</td>
                                    <td *ngIf="!p.variantID && !p.dealID && p.discount == 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.price | number}}
                                    </td>
                                    <td *ngIf="!p.variantID && !p.dealID && p.discount != 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.calculatedPrice | number}}
                                    </td>
                                    <td *ngIf="p.variantID && !p.dealID && p.discount == 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.variantPrice | number}}
                                    </td>
                                    <td *ngIf="p.variantID && !p.dealID && p.discount != 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.calculatedPrice | number}}
                                    </td>
                                    <td *ngIf="p.dealID" style="text-align: right;">
                                        {{GV.Currency}} {{p.dealPrice | number}}
                                    </td>
                                    <td>
                                        <button class="btn btn-success color text-white btn-sm" (click)="decrement(p)">
                                            <i class="fa fa-minus" aria-hidden="true"></i></button>
                                        {{p.quantity}}
                                        <button class="btn btn-success color text-white btn-sm" (click)="increment(p)">
                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                    </td>

                                    <td *ngIf="p.discount == 0">0</td>
                                    <td *ngIf="p.variantID && !p.dealID && p.discount != 0">{{ p.quantity *
                                        (p.variantPrice - p.calculatedPrice)}}</td>
                                    <td *ngIf="!p.variantID && !p.dealID && p.discount != 0">{{ p.quantity *
                                        (p.price - p.calculatedPrice)}}</td>
                                    <td *ngIf="!p.variantID && p.dealID && p.discount != 0">{{ p.quantity *
                                        (p.dealPrice - p.calculatedPrice)}}</td>

                                    <td *ngIf="!p.variantID && !p.dealID && p.discount == 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.quantity * p.price
                                        |
                                        number}}</td>
                                    <td *ngIf="!p.variantID && !p.dealID && p.discount != 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.quantity *
                                        p.calculatedPrice |
                                        number}}</td>
                                    <td *ngIf="p.variantID && !p.dealID && p.discount == 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.quantity *
                                        p.variantPrice |
                                        number}}</td>
                                    <td *ngIf="p.variantID && !p.dealID && p.discount != 0" style="text-align: right;">
                                        {{GV.Currency}} {{p.quantity *
                                        p.calculatedPrice
                                        | number}}</td>
                                    <td *ngIf="p.dealID" style="text-align: right;">{{GV.Currency}} {{p.quantity *
                                        p.dealPrice |
                                        number}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="bottom_absolute">
                    <hr>
                    <div class="bottom__info">
                        <div class="footer__content">
                            <div class="item">
                                <input type="hidden" id="open_invoice_date_hidden" value="2021-10-12">
                                <div>Total Item: <span
                                        id="total_items_in_cart_with_quantity">{{POSNewModelRequest.requestKotDetail.length}}</span>
                                </div>
                            </div>
                            <div class="item">
                                <span>Sub Total: </span>
                                <span id="sub_total_show">{{GV.Currency}}
                                    {{subTotal | number}}</span>
                            </div>
                            <div class="item">
                                <span>Discount: <i class="fal fa-edit no-need-for-waiter" id="open_charge_modal"></i>
                                    <span id="show_charge_amount">{{GV.Currency}}
                                        {{discount |
                                        number}}</span></span>
                            </div>
                            <div class="item">
                                <span>Tax: </span>
                                <i class="fal fa-eye no-need-for-waiter" id="open_tax_modal"></i>
                                <span id="show_vat_modal">{{GV.Currency}}
                                    {{salesTax |
                                    number}}</span>
                            </div>
                            <div class="item">
                                <span>Charge: <i class="fal fa-edit no-need-for-waiter" id="open_charge_modal"></i>
                                    <span id="show_charge_amount">0.00</span></span>
                            </div>
                        </div>
                        <div class="payable">
                            <h1>Total Payable: <span id="total_payable">{{GV.Currency}}
                                    {{total |
                                    number}}</span></h1>
                        </div>
                        <div class="main_bottom">
                            <div class="button_group">
                                <button id="cancel_button" (click)="resetOrder()"><i class="fas fa-redo"></i>
                                    Reset</button>
                                <button id="cancel_button" data-toggle="modal"
                                    [disabled]="POSNewModelRequest.requestKotDetail.length == 0"
                                    data-target="#addRemarksModal"><i class="fas fa-comment"></i>
                                    Remarks</button>
                                <button id="direct_invoice" style="background-color: rgb(4, 0, 223);"
                                    [disabled]="POSNewModelRequest.requestKotDetail.length == 0"
                                    class="no-need-for-waiter" [printStyle]="{h1 : {'color': 'black'}, 
                                h2 : {'border': 'solid 2px'}, 
                                    th:{'border-bottom': 'solid 1px'}, table:{'border': 'solid 1px'}, 
                                    td:{'border-bottom': 'solid 0.5px', 'border-right': 'solid 0.5px'}}"
                                    printSectionId="InvoicePrint" ngxPrint><i class="fas fa-file-invoice"></i>
                                    <span id="place_edit_order_direct_invoice"> Invoice</span></button>
                                <button style="background-color: rgb(0, 208, 0);" title="Shift+P"
                                    [disabled]="POSNewModelRequest.requestKotDetail.length == 0" class="placeOrderSound"
                                    id="place_order_operation" (click)="submitOrder()">
                                    <i class="fas fa-utensils"></i>
                                    <span id="place_edit_order"> Place
                                        Order</span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <button [hidden]="true" type="button" id="KOTReciept" #KOTReciept [printStyle]="{h1 : {'color': 'black'}, 
        h2 : {'border': 'solid 2px'}, 
            th:{'border-bottom': 'solid 1px'}, table:{'border': 'solid 1px'},
            td:{'border-bottom': 'solid 0.5px', 'border-right': 'solid 0.5px'}}" printSectionId="KOTPrint"
            ngxPrint></button>

        <button [hidden]="true" type="button" id="InvoiceReciept" #InvoiceReciept [printStyle]="{h1 : {'color': 'black'}, 
            h2 : {'border': 'solid 2px'}, 
                th:{'border-bottom': 'solid 1px'}, table:{'border': 'solid 1px'}, 
                td:{'border-bottom': 'solid 0.5px', 'border-right': 'solid 0.5px'}}" printSectionId="InvoicePrint"
            ngxPrint></button>

        <div class="main_right" style="height: 540px;">
            <form [formGroup]="SearchForm">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row mb-2">
                            <div class="col-md-6">
                                <button [ngStyle]="{'background-color':isShow == true ? '#c90000 ' : '#f15a29' }"
                                    type="button" class="w-100 btn bg-blue-btn" (click)="showOrHide(1)">Items</button>
                            </div>
                            <div class="col-md-6">
                                <button [ngStyle]="{'background-color':isShow == false ? '#c90000 ' : '#f15a29' }"
                                    type="button" class="w-100 btn bg-blue-btn" (click)="showOrHide(2)">Deals</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-2">
                            <input type="text" class="inputField" (input)="searchByRC()"
                                formControlName="searchByRefCode" placeholder="Search by Refrence Code">
                            <button type="submit" class="searchButton" (click)="searchByRC()"><i
                                    class="fa fa-search"></i></button>
                        </div>
                    </div>
                </div>
                <div class="ir_pos_relative">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-3" id="main_item_holder">
                                <div class="anyClass category-list" style="position: relative;">
                                    <ul class="list-of-item">
                                        <li>
                                            <a href="javascript:void(0)" id="button_category_show_all1"
                                                (click)="filterCategories(0)">All</a>
                                        </li>
                                        <li *ngFor="let p of FoodCatResponseModel"><a href="javascript:void(0)"
                                                (click)="filterCategories(p)" class="category_button"
                                                id="button_category_1">{{ p.newStr}}</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-9 anyClass" [hidden]="isShow == false">
                                <div class="row">
                                    <ng-container *ngFor="let p of ItemsResponseModelReplica">
                                        <ng-container *ngIf="p.hasVariant == false">
                                            <div class="col-md-4 card main_partOne" (click)="pushItem(p)">
                                                <div class="category_items">
                                                    <div class="single_item animate__animated all_item_custom"
                                                        id="item_25">
                                                        <ng-container *ngIf="p.imageURl == null">
                                                            <img src="assets/img/image_thumb.png">
                                                        </ng-container>
                                                        <ng-container *ngIf="p.imageURl != null">
                                                            <img src="{{p.imageURl}}" alt="" width="141">
                                                        </ng-container>

                                                        <p class="item_name">
                                                            {{p.newStr}}
                                                        </p>
                                                        <p class="item_price"
                                                            *ngIf="p.discount == 0 && p.hasVariant == false">
                                                            {{symbol}}
                                                            {{p.price |
                                                            number}}</p>
                                                        <p class="item_price"
                                                            *ngIf="p.discount != 0 && p.hasVariant == false">
                                                            {{symbol}}
                                                            {{p.calculatedPrice | number}} / <del
                                                                style="color: black;">{{p.price
                                                                |
                                                                number}}</del></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="p.hasVariant == true">
                                            <div class="col-md-4 card main_partOne" data-toggle="modal"
                                                data-target="#VariantModal" (click)="getVariants(p)">
                                                <div class="category_items">
                                                    <ng-container *ngIf="p.hasVariant == true">
                                                        <div class="single_item animate__animated all_item_custom"
                                                            data-veg_status="yes" data-beverage_status="no"
                                                            id="item_25">
                                                            <ng-container *ngIf="p.imageURl == null">
                                                                <img src="assets/img/image_thumb.png">
                                                            </ng-container>
                                                            <ng-container *ngIf="p.imageURl != null">
                                                                <img src="{{p.imageURl}}" alt="" width="141">
                                                            </ng-container>
                                                            <p class="item_name"
                                                                data-tippy-content="Better Chocolate Chip Cookies">
                                                                {{p.newStr}}
                                                            </p>
                                                            <p class="item_price">
                                                                (V)</p>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="col-md-9 anyClass" [hidden]="isShow == true">
                                <div class="row">
                                    <div class="col-md-4 card main_partOne" *ngFor="let p of responseDealsModel">
                                        <div class="category_items" (click)="pushItem(p)">
                                            <ng-container>
                                                <div class="single_item animate__animated all_item_custom" id="item_25">
                                                    <img src="{{p.imageURL}}" alt="" width="141">
                                                    <p class="item_name">
                                                        {{p.dealName}}
                                                    </p>
                                                    <p class="item_price">
                                                        {{symbol}} {{p.dealPrice | number}}</p>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<div class="modal fade come-from-modal right" id="addDeliveryModal" tabindex="-1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeAddCustomerModal><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add Delivery</h4>
            </div>
            <div class="modal-body">
                <form [formGroup]="CustomerForm" (ngSubmit)="saveCustomer()">
                    <div class="row">
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group">
                                <label>Customer Name<span class="required_star">*</span></label>
                                <input minlength="3" autocomplete="off" type="text"
                                    formControlName="customerName" class="form-control" placeholder="Customer Name"
                                    value="" [ngClass]="{ 'is-invalid': submitted && h.customerName.errors }" />
                                <div *ngIf="submitted && h.customerName.errors" class="invalid-feedback">
                                    <div *ngIf="h.customerName.errors.required">Customer Name is required</div>
                                    <small
                                        *ngIf="CustomerForm.controls['customerName'].errors?.minlength && !h.customerName.errors.whitespace"
                                        class="text-danger">Customer
                                        Name must be at
                                        least 3 characters long.</small>
                                    <small
                                        *ngIf="h.customerName.errors.whitespace && !h.customerName.errors.required">Please
                                        enter valid
                                        data</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group">
                                <label>Refrence Code<span class="required_star">*</span></label>
                                <input autocomplete="off" type="text" formControlName="refCode"
                                    class="form-control" placeholder="Customer Name" value=""
                                    [ngClass]="{ 'is-invalid': submitted && h.refCode.errors }" />
                                <div *ngIf="submitted && h.refCode.errors" class="invalid-feedback">
                                    <div *ngIf="h.refCode.errors.required">Refrence Code is required</div>
                                    <small *ngIf="h.refCode.errors.whitespace && !h.refCode.errors.required">Please
                                        enter valid
                                        data</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group">
                                <label>Mobile No. <span class="required_star">*</span></label>
                                <input type="text" class="form-control" mask='0000-0000000' placeholder="Mobile No."
                                    formControlName="mobileNO"
                                    [ngClass]="{ 'is-invalid': submitted && h.mobileNO.errors }">
                                <div *ngIf="submitted && h.mobileNO.errors" class="invalid-feedback">
                                    <div *ngIf="h.mobileNO.errors.required">Mobile number is required</div>
                                    <small *ngIf="h.mobileNO.errors.pattern">Mobile number format not correct.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group float-start">
                                <label class="col-sm-12">Is Active?</label>
                                <div class="col-sm-6">
                                    <input type="checkbox" class="form-control " formControlName="isActive"
                                        (click)="isActiveCheck(IsActive.checked)" #IsActive />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-12">
                            <div class="form-group">
                                <label>Address <span class="required_star">*</span></label>
                                <textarea formControlName="Address" maxlength="250" class="form-control"
                                    autocomplete="off"></textarea>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-12" *ngIf="viewMode == true">
                            <div class="form-group">
                                <label>Favourites</label>
                                <textarea style="height: 100px;" formControlName="favDescription" maxlength="250"
                                    class="form-control" autocomplete="off" readonly></textarea>
                                <!-- <select class="form-control">
                                    <option *ngFor="let p of customerFavResponse">
                                        {{p.occurrence}} x {{p.foodItemName}}
                                    </option>
                                </select> -->
                            </div>
                        </div>

                        <div class="col-sm-12 mb-2 col-md-12">
                            <div class="form-group">
                                <label></label>
                                <button *ngIf="addMoborAdd == false && CustomerForm.controls.customerID.value > 0"
                                    type="button" class="btn btn-primary float-end" (click)="addMobAdd()">Add Mobile
                                    No or Address</button>
                                <button *ngIf="addMoborAdd == true" type="button" class="btn btn-primary float-end"
                                    (click)="addMobAdd()">Cancel</button>
                            </div>
                        </div>
                        <ng-container *ngIf="addMoborAdd">
                            <div class="col-sm-12 mb-2 col-md-6">
                                <div class="form-group">
                                    <label>Mobile No.</label>
                                    <input type="text" id="newMobileNo" #newMobileNo name="newMobileNo"
                                        class="form-control" mask='0000-0000000' placeholder="Mobile No."
                                        (change)="setMobile(newMobileNo)">
                                </div>
                            </div>
                            <div class="col-sm-12 mb-2 col-md-6">
                                <div class="form-group">
                                    <label>Address</label>
                                    <textarea id="newAddress" #newAddress name="newAddress" maxlength="250"
                                        class="form-control" autocomplete="off"
                                        (change)="setAddress(newAddress)"></textarea>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="responseAddress.length > 0">
                            <div class="table-box">
                                <div class="table-responsive">
                                    <table id="datatable" class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th style="color: black;">Address</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let p of responseAddress let ndx=index;">
                                                <td><input type="checkbox" id="addressCheck" #addressCheck
                                                        [checked]="p.checked" name="addressCheck"
                                                        (click)="checkAddress(addressCheck.checked,p)"></td>
                                                <td>{{p.adress}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                    (click)="addCustomer()">Cancel</button>
                <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
                <button type="button" *ngIf="viewMode == false" class="btn btn-primary"
                    (click)="saveCustomer()">Save</button>
                <button type="button" *ngIf="viewMode == true" class="btn btn-primary"
                    (click)="saveCustomer()">Update</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade half-modal right" id="VariantModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeVariantsModal><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Variants</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4 card main_partOne" *ngFor="let p of responseVariant">
                        <div class="category_items" (dblclick)="pushItem(p)">
                            <ng-container>
                                <div class="single_item animate__animated all_item_custom" id="item_25">
                                    <ng-container *ngIf="p.imageURL == null">
                                        <img src="assets/img/image_thumb.png">
                                    </ng-container>
                                    <ng-container *ngIf="p.imageURL != null">
                                        <img src="{{p.imageURL}}" alt="" width="141">
                                    </ng-container>
                                    <p class="item_name" style="font-weight: 600">
                                        {{p.variantName}}
                                    </p>
                                    <p class="item_price" *ngIf="p.discount == 0 ">
                                        {{symbol}}
                                        {{p.variantPrice |
                                        number}}</p>
                                    <p class="item_price" *ngIf="p.discount != 0 ">
                                        {{symbol}}
                                        {{p.calculatedPrice | number}} / <del style="color: black;">{{p.variantPrice
                                            |
                                            number}}</del></p>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade come-from-modal right" id="addCustomerModal" tabindex="-1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeAddCustomerModal><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add Customer</h4>
            </div>
            <div class="modal-body">
                <form [formGroup]="CustomerForm" (ngSubmit)="saveCustomer()">
                    <div class="row">
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group">
                                <label>Customer Name<span class="required_star">*</span></label>
                                <input minlength="3" autocomplete="off" type="text"
                                    formControlName="customerName" class="form-control" placeholder="Customer Name"
                                    value="" [ngClass]="{ 'is-invalid': submitted && h.customerName.errors }" />
                                <div *ngIf="submitted && h.customerName.errors" class="invalid-feedback">
                                    <div *ngIf="h.customerName.errors.required">Customer Name is required</div>
                                    <small
                                        *ngIf="CustomerForm.controls['customerName'].errors?.minlength && !h.customerName.errors.whitespace"
                                        class="text-danger">Customer
                                        Name must be at
                                        least 3 characters long.</small>
                                    <small
                                        *ngIf="h.customerName.errors.whitespace && !h.customerName.errors.required">Please
                                        enter valid
                                        data</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group">
                                <label>Refrence Code<span class="required_star">*</span></label>
                                <input autocomplete="off" type="text" formControlName="refCode"
                                    class="form-control" placeholder="Customer Name" value=""
                                    [ngClass]="{ 'is-invalid': submitted && h.refCode.errors }" />
                                <div *ngIf="submitted && h.refCode.errors" class="invalid-feedback">
                                    <div *ngIf="h.refCode.errors.required">Refrence Code is required</div>
                                    <small *ngIf="h.refCode.errors.whitespace && !h.refCode.errors.required">Please
                                        enter valid
                                        data</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group">
                                <label>Mobile No. <span class="required_star">*</span></label>
                                <input type="text" class="form-control" mask='0000-0000000' placeholder="Mobile No."
                                    formControlName="mobileNO"
                                    [ngClass]="{ 'is-invalid': submitted && h.mobileNO.errors }">
                                <div *ngIf="submitted && h.mobileNO.errors" class="invalid-feedback">
                                    <div *ngIf="h.mobileNO.errors.required">Mobile number is required</div>
                                    <small *ngIf="h.mobileNO.errors.pattern">Mobile number format not correct.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-6">
                            <div class="form-group float-start">
                                <label class="col-sm-12">Is Active?</label>
                                <div class="col-sm-6">
                                    <input type="checkbox" class="form-control " formControlName="isActive"
                                        (click)="isActiveCheck(IsActive.checked)" #IsActive />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-12">
                            <div class="form-group">
                                <label>Address <span class="required_star">*</span></label>
                                <textarea formControlName="Address" maxlength="250" class="form-control"
                                    autocomplete="off"></textarea>
                            </div>
                        </div>
                        <div class="col-sm-12 mb-2 col-md-12" *ngIf="viewMode == true">
                            <div class="form-group">
                                <label>Favourites</label>
                                <textarea style="height: 100px;" formControlName="favDescription" maxlength="250"
                                    class="form-control" autocomplete="off" readonly></textarea>
                                <!-- <select class="form-control">
                                    <option *ngFor="let p of customerFavResponse">
                                        {{p.occurrence}} x {{p.foodItemName}}
                                    </option>
                                </select> -->
                            </div>
                        </div>

                        <div class="col-sm-12 mb-2 col-md-12">
                            <div class="form-group">
                                <label></label>
                                <button *ngIf="addMoborAdd == false" type="button" class="btn btn-primary float-end"
                                    (click)="addMobAdd()">Add Mobile
                                    No or Address</button>
                                <button *ngIf="addMoborAdd == true" type="button" class="btn btn-primary float-end"
                                    (click)="addMobAdd()">Cancel</button>
                            </div>
                        </div>
                        <ng-container *ngIf="addMoborAdd">
                            <div class="col-sm-12 mb-2 col-md-6">
                                <div class="form-group">
                                    <label>Mobile No.</label>
                                    <input type="text" id="newMobileNo" #newMobileNo name="newMobileNo"
                                        class="form-control" mask='0000-0000000' placeholder="Mobile No."
                                        (change)="setMobile(newMobileNo)">
                                </div>
                            </div>
                            <div class="col-sm-12 mb-2 col-md-6">
                                <div class="form-group">
                                    <label>Address</label>
                                    <textarea id="newAddress" #newAddress name="newAddress" maxlength="250"
                                        class="form-control" autocomplete="off"
                                        (change)="setAddress(newAddress)"></textarea>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                    (click)="addCustomer()">Cancel</button>
                <button type="button" *ngIf="viewMode == false" class="btn btn-primary"
                    (click)="saveCustomer()">Save</button>
                <button type="button" *ngIf="viewMode == true" class="btn btn-primary"
                    (click)="saveCustomer()">Update</button>
            </div>
        </div>
    </div>
</div>


<!-- .......................................KOT Receipt............................................. -->

<div class="invoice" id="KOTPrint" [hidden]="true" data-backdrop="static" data-keyboard="false">
    <h3 class="text-center">ORDER NO: {{POSNewModelRequest.requestKot.kotNO}}
    </h3>
    <p class="centered">
        Table: {{tableList}}
        <br>
        <!-- <ng-container *ngIf="POSNewModelRequest.requestOrder.orderID > 0">
            Order No: {{POSNewModelRequest.requestOrder.orderID}}</ng-container>
        <ng-container *ngIf="POSNewModelRequest.requestOrder.orderID == 0">
            Order No: Payment Pending</ng-container> -->
        Waiter: abc
        <br>
        Order Type: {{POSNewModelRequest.requestKot.orderType}}
        <br>
    </p>
    <div class="table-box">
        <div class="table-responsive">
            <table id="datatable" class="table table-striped">
                <thead>
                    <tr>
                        <th class="ir_w_30">Name</th>
                        <th>Qty</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let p of POSNewModelRequest.requestKotDetail let ndx=index;">
                        <td class="ir_w_30" *ngIf="!p.variantID && !p.dealID">
                            {{p.foodItemName}}</td>
                        <td class="ir_w_30" *ngIf="p.variantID && !p.dealID">
                            {{p.foodItemName}} ({{p.variantName}})
                        </td>
                        <td class="ir_w_30" *ngIf="p.dealID">{{p.dealName}}</td>
                        <td>
                            {{p.quantity}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <p class="centered">
        Remarks: {{POSNewModelRequest.requestKot.remarks}}
    </p>
</div>



<!-- .......................................INVOICE Receipt............................................. -->

<div class="invoice" id="InvoicePrint" [hidden]="true" data-backdrop="static" data-keyboard="false">
    <h3 class="text-center">{{GV.companyName}}</h3>
    <p class="centered">
        Outlet: {{GV.OutletName}}
        <!-- <br>
        <ng-container *ngIf="POSNewModelRequest.requestOrder.orderID > 0">
            Order No: {{POSNewModelRequest.requestOrder.orderID}}</ng-container>
        <ng-container *ngIf="POSNewModelRequest.requestOrder.orderID == 0">
            Order No: Payment Pending</ng-container> -->
    </p>
    <div class="table-box">
        <div class="table-responsive">
            <table id="datatable" class="table table-striped">
                <thead>
                    <tr>
                        <th></th>
                        <th class="ir_w_30">Name</th>
                        <th>Qty</th>
                        <th style="text-align: right;">Price</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let p of POSNewModelRequest.requestKotDetail let ndx=index;">
                        <td class="ir_w_1 ir_txt_center">
                        </td>
                        <td class="ir_w_30" *ngIf="!p.variantID && !p.dealID">
                            {{p.foodItemName}}</td>
                        <td class="ir_w_30" *ngIf="p.variantID && !p.dealID">
                            {{p.foodItemName}} ({{p.variantName}})
                        </td>
                        <td class="ir_w_30" *ngIf="p.dealID">{{p.dealName}}</td>
                        <td>
                            {{p.quantity}}
                        </td>
                        <td *ngIf="!p.variantID && !p.dealID && p.discount == 0" style="text-align: right;">
                            {{GV.Currency}} {{p.price | number}}
                        </td>
                        <td *ngIf="!p.variantID && !p.dealID && p.discount != 0" style="text-align: right;">
                            {{GV.Currency}} {{p.calculatedPrice | number}}
                        </td>
                        <td *ngIf="p.variantID && !p.dealID && p.discount == 0" style="text-align: right;">
                            {{GV.Currency}} {{p.variantPrice | number}}
                        </td>
                        <td *ngIf="p.variantID && !p.dealID && p.discount != 0" style="text-align: right;">
                            {{GV.Currency}} {{p.calculatedPrice | number}}
                        </td>
                        <td *ngIf="p.dealID" style="text-align: right;">
                            {{GV.Currency}} {{p.dealPrice | number}}
                        </td>
                    </tr>
                    <tr *ngIf="POSNewModelRequest.requestKotDetail.length > 0">
                        <td>SubTotal</td>
                        <td></td>
                        <td></td>
                        <td style="text-align: right;" *ngIf="subTotal == 0">-
                        </td>
                        <td class="ir_w_50" style="text-align: right;" *ngIf="subTotal > 0">
                            {{GV.Currency}}
                            {{subTotal | number}}
                        </td>
                    </tr>
                    <tr *ngIf="POSNewModelRequest.requestKotDetail.length > 0">
                        <td>Sales Tax</td>
                        <td></td>
                        <td></td>
                        <td style="text-align: right;" *ngIf="salesTax == 0">-</td>
                        <td style="text-align: right;" *ngIf="salesTax > 0">
                            {{GV.Currency}}
                            {{salesTax |
                            number}}</td>
                    </tr>
                    <tr *ngIf="POSNewModelRequest.requestKotDetail.length > 0">
                        <td>Discount {{GV.Currency}}</td>
                        <td></td>
                        <td></td>
                        <td style="text-align: right;" *ngIf="discount == 0">-</td>
                        <td style="text-align: right;" *ngIf="discount > 0">
                            {{GV.Currency}}
                            {{discount |
                            number}}</td>
                    </tr>
                    <tr *ngIf="POSNewModelRequest.requestKotDetail.length > 0">
                        <td><b>Total</b></td>
                        <td></td>
                        <td></td>
                        <td style="text-align: right;" *ngIf="total == 0"><b>-</b></td>
                        <td style="text-align: right;" *ngIf="total > 0">
                            <b>{{GV.Currency}}
                                {{total |
                                number}}</b>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <p class="centered">Thank You!
        <br>Powered By: POS Plus
    </p>
</div>

<div class="modal fade" id="addRemarksModal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog"
    aria-labelledby="assignedGroupRoleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Remarks</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeAddRemarksModal>
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 mb-2 col-md-12">
                        <div class="form-group">
                            <label>Remarks</label>
                            <textarea style="height: 100px;" [(ngModel)]="orderRemarks" maxlength="250"
                                class="form-control" autocomplete="off"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="saveRemarks()">Save</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade come-from-modal left" id="TablesModal" tabindex="-1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="row">
                <div class="modal-header">

                    <div class="col-md-2">
                        <button type="button" class="close float-start" data-dismiss="modal" aria-label="Close"
                            #closeTablesModal><span aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="row col-md-9">
                        <div class="col-md-4">
                            <h4 class="modal-title" id="myModalLabel">Total:
                                {{totalTables}} </h4>
                        </div>
                        <div class="row col-md-4">
                            <div class="col-md-2 fff">
                            </div>
                            <div class="col-md-8">
                                <h4 class="modal-title" id="myModalLabel">
                                    Free: {{tablesFree}} </h4>
                            </div>
                        </div>
                        <div class="row col-md-4">
                            <div class="col-md-2 ggg">
                            </div>
                            <div class="col-md-8">
                                <h4 class="modal-title" id="myModalLabel">
                                    Occupied: {{tablesOccupied}} </h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <h4 class="modal-title float-end" id="myModalLabel">Tables</h4>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6 mb-3 col-md-3 " *ngFor="let p of tablesResponse">
                        <div class="tables-box text-center" (dblclick)="viewOrder(p)"
                            [ngStyle]="{'background-color': p.statusID == 1 ? '#f15a29' :  'rgb(23, 161, 175)'}">
                            <h3 class="title" style="color: white;">{{p.tableName}}</h3>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade come-from-modal left" id="OrdersModal" tabindex="-1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeOrdersModal><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Orders</h4>
            </div>
            <div class="modal-body">
                <div class="box-wrapper" [hidden]="responseOrder.length == 0">
                    <table datatable [dtOptions]="dtOptions4" [dtTrigger]="dtTrigger4" class="row-border hover">
                        <thead>
                            <tr>
                                <th style="color: black;">SR</th>
                                <th style="color: black;">ORDER NO</th>
                                <th style="color: black;">STATUS</th>
                                <th style="color: black;">ACTIONS</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of responseOrder let ndx=index;">
                                <ng-container *ngIf="p.statusID != 6 && p.statusID != 7">
                                    <td>{{ndx+1}}</td>
                                    <td>{{p.kotNO}}</td>
                                    <td *ngIf="p.statusID == 3" style="color: rgb(0, 197, 0);">
                                        NEW_ORDER
                                    </td>
                                    <td *ngIf="p.statusID == 4" style="color: rgb(12, 0, 242);">
                                        IN_QUEUE
                                    </td>
                                    <td *ngIf="p.statusID == 5" style="color: rgb(199, 0, 209);">
                                        ORDER_READY
                                    </td>
                                    <td *ngIf="p.statusID == 8" style="color: #f15a29;">
                                        ORDER_COLLECTED
                                    </td>
                                    <td>
                                        <button class="btn btn-success color text-white btn-sm m-1" title="Edit"
                                            (click)="viewOrder(p)">
                                            <i class="fa fa-pencil" aria-hidden="true"></i></button>
                                        <button class="btn btn-secondary color text-white btn-sm m-1" title="Bill"
                                            (click)="getInvoiceReciept(p.kotID)">
                                            B</button>
                                        <button class="btn btn-danger color text-white btn-sm m-1" title="Invoice"
                                            (click)="paymentMade(p); getInvoiceReciept(p.kotID)">
                                            I</button>
                                        <button class="btn btn-primary color text-white btn-sm m-1" title="Cancel Order"
                                            (click)="cancelOrderNotConfirm(p)">
                                            <i class="fa fa-times" aria-hidden="true"></i></button>
                                    </td>
                                </ng-container>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>